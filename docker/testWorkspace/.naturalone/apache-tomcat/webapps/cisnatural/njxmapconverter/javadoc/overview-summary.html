<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_131) on Sun Aug 12 20:07:57 CEST 2018 -->
<title>Overview</title>
<meta name="date" content="2018-08-12">
<link rel="stylesheet" type="text/css" href="javadocstyle.css" title="Style">
<script type="text/javascript" src="script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Overview";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li class="navBarCell1Rev">Overview</li>
<li>Package</li>
<li>Class</li>
<li>Use</li>
<li><a href="overview-tree.html">Tree</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev</li>
<li>Next</li>
</ul>
<ul class="navList">
<li><a href="index.html?overview-summary.html" target="_top">Frames</a></li>
<li><a href="overview-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 class="title">Map Converter Extension API</h1>
</div>
<div class="header">
<div class="subTitle">
<div class="block">The Map Converter Extension API provides classes and interfaces to extend and/or customize the conversion process.</div>
</div>
<p>See: <a href="#overview.description">Description</a></p>
</div>
<div class="contentContainer">
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Packages table, listing packages, and an explanation">
<caption><span>Packages</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Package</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="com/softwareag/natural/mapconverter/package-summary.html">com.softwareag.natural.mapconverter</a></td>
<td class="colLast">
<div class="block">Contains data and utility classes and interfaces.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="com/softwareag/natural/mapconverter/converters/package-summary.html">com.softwareag.natural.mapconverter.converters</a></td>
<td class="colLast">
<div class="block">Contains basic classes to customize the conversion processess.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="com/softwareag/natural/mapconverter/logger/package-summary.html">com.softwareag.natural.mapconverter.logger</a></td>
<td class="colLast">
<div class="block">Contains classes to write map conversion logfiles.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="com/softwareag/natural/sdo/mapxml/nat/mapxml4sdo/package-summary.html">com.softwareag.natural.sdo.mapxml.nat.mapxml4sdo</a></td>
<td class="colLast">
<div class="block">Contains data classes which represent the corresponding fields and literal in a mapxml.</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="contentContainer"><a name="overview.description">
<!--   -->
</a>
<div class="block">The Map Converter Extension API provides classes and interfaces to extend and/or customize the conversion process.
<h2>Map Converter Extensions</h2>
<dl>
<dt><b>Area Header Handlers</b></dt>
<dd>An area header handler identifies fields and literals which should be used as headers in complex controls like grids.</dd>
<br></br>
<dt><b>Listeners to the Conversion Process</b></dt>
<dd>Example usage: Add a listener to write out textids and corresponding localization files.</dd>
<br></br>
<dt><b>Custom Tag Converters</b></dt>
<dd>Example usage: Add a tag converter for a google map control.</dd>
<br></br>
<dt><b>Mapxml Transformers</b></dt>
<dd>Classes can extend or modify the map extract xml before the map conversion is performed. Example usage: Multi-dimensional array handling.</dd>
</dl>
<br></br>
Additionally to the Extension API there is also a command line utility. This allows for integrating the mass generation of layout files from map extracts into windows command files or unix shell scripts.  
for more information see <A HREF="com/softwareag/natural/mapconverter/MapConverterMain.html">MapConverterMain</A>.
<br></br>
<h2>Area Header Handlers</h2>
Map conversion is done in several steps. After loading the map extract XML the Map Converter identifies grid areas and sequence areas. 
Grid areas and sequence areas are nothing more than a grouping of fields and literals. For such an area (=group of fields and literals) it is possible to create complex layout controls like grid, tree and list controls. However what controls actually are created during the subsequent conversion steps depends on the conversion rules.
<br></br>
After the area identification the Map Converter calls an area header handler to identify headers. The Map Converter comes with three area header handler implementations:
<br></br>
<ul>
        <li><A HREF="com/softwareag/natural/mapconverter/converters/DEFAULTAreaHeaderHandler.html">DEFAULTAreaHeaderHandler</A></li>
        <li><A HREF="com/softwareag/natural/mapconverter/converters/UnderlineAreaHeaderHandler.html">UnderlineAreaHeaderHandler</A></li>
        <li><A HREF="com/softwareag/natural/mapconverter/convertes/LiteralAreaHeaderHandler.html">LiteralAreaHeaderHandler</A></li>
</ul>
You'll find the source code of the listeners in: <code>/cisnatural/njxmapconverter/examplesrc/</code>
<br></br>
Users can also write own area header handlers and integrate them into the corresponding conversion step:
<ol>
        <li>Write the corresponding handler. The class must implement the interface<code><A HREF="com/softwareag/natural/mapconverter/converters/IAreaHeaderHandler.html">IAreaHeaderHandler</A></code></li>
        <li>Adapt the <code>$$headerhandler$$</code> variable in your conversion rules file. The default setting is:<br></br>
<code>
&lt;convvariable dynamic="false" varkind="sys"&gt;
                &lt;varname&gt;$$headerhandler$$&lt;/varname&gt;
                &lt;varvalue&gt;com.softwareag.natural.mapconverter.converters.DEFAULTAreaHeaderHandler&lt;/varvalue&gt;
        &lt;/convvariable&gt;
</code></li><br></br>
<li>Put the compiled .class file into the classpath of the cisnatural webapplication (cisnatural/WEB-INF/classes) or into the cisnatural/njxmapconverter/appclasses/classes directory</li>
</ol>
<br></br>
<h2>Listeners to theConversion Process</h2>
Conversion rules and templates are convenient to do a 1:1 mapping between fields or groups of fields and controls. Sometimes this is not sufficient. For instance when localizing a complete application you might want to generate textids and corresponding message files for a complete application. There is no easy way to express the unique creation of textids via conversion rules. Also the writing of the message files cannot be achieved via rules.
<br></br>
Instead you can write a simple Java class and integrate it as listener to the conversion process:<br></br>
<ol>
        <li>Write the corresponding handler. The class must implement the interface <code>IConversionListener</code> and must reside in the package <code>com.softwareag.natural.mapconverter.converters</code></li>
        <li>Adapt the <code>$$convlistener$$</code> variable in your conversion rules file. The default setting is:<br></br>
<code>
&lt;convvariable dynamic="false" varkind="sys"&gt;              
                &lt;varname&gt;$$convlistener$$&lt;/varname&gt;
                &lt;varvalue&gt;com.softwareag.natural.mapconverter.converters.TEXTIDConversionListener&lt;/varvalue&gt;
        &lt;/convvariable&gt;</code></li><br></br>
<li>Put the compiled .class file into the classpath of the cisnatural webapplication (cisnatural/WEB-INF/classes) or into the cisnatural/njxmapconverter/appclasses/classes directory</li>
</ol>
You'll find the source code of the listeners in: <code>/cisnatural/njxmapconverter/examplesrc/</code>

<h2>Custom Tag Converters</h2>
Via conversion rules you specify which fields should be converted into which layout controls. Templates can be used to define the look and field of the corresponding layout control. These templates contain the tags and attributes of the corresponding layout controls. In difference to the final control definitions in the generated layout, the templates include variables. These variables are resolved during the conversion using the specific field values.
<br></br>
Application Designer has a large variety of layout controls and each control has many attributes. Specific controls have specific attributes with specific semantics. You could in theory add a rule variable for each attribute you use in a template. An easier and more structured way is to use tag converters which are responsible to resolve variables in templates. You don't have to add a specific tag converter for all layout controls. The Map Converter comes with a DEFAULTConverter which covers the basic attributes of simple controls. Also for the most frequently used layout controls tag converters are already available. However if you would like to use a template for a more complex controls for which the DEFAULTConverter is not sufficient and for which no tag converter is included you can write your own custom tag converter.
<br></br>
A tag converter is a class which:
<br></br>
 <ol>
        <li>Subclasses  <A HREF="com/softwareag/natural/mapconverter/converters/DEFAULTConverter.html">DEFAULTConverter</A> and implement the method  <code>resolveAttribute()</code></li><br></br>
        <li>Must reside in the package <code>com.softwareag.natural.mapconverter.converters</code></li><br></br>
        <li>Understands the attribute semantics of a specific tag. For instance you could have a <code>FIELDConverter</code> which knows about the attributes of the field control.</li><br></br>
        <li>Must have the name 'Tag'Converter where 'Tag' is name of the root xml tag of the corresponding control in upper cases.</li><br></br>
</ol>
<br></br>
The implementation of a  tag converter is very simply. It simply resolves attribute values for attributes for which the "$$" variable is defined in a template. Let's look at the following example template:<br></br>
<code>
&lt;field valueprop="$$"  width="$$" noborder='true' displayonly='true'/&gt;
</code><br></br>
The Map Converter will search for a class <code>com.softwareag.natural.mapconverter.converters.FIELDConverter </code> in the classpath. If none exists it will use the DEFAULTConverter. The tag converter will simply be asked for the values of the attributes <code>valueprop</code> and <code>width</code>. If the tag converter returns null for an attribute the Map Converter will use the value of a varible with the same name ($$valueprop$$ and $$width$$). If no such variable exists the value is an empty string "".<br></br>
Hint: Use the same tag converter for several templates. For instance the FIELDConverter is used for the OFIELD_TEMPLATE.xml and the IFIELD_TEMPLATE.xml. Which tag converter is used to resolve the "$$" variables in a template only depends on the name of the root xml tag.
<br></br>
<h2>Mapxml Transformers</h2>
Multi-dimensional array items cannot be bound directly to GRID controls. 
Only 1-dimensional arrays can be directly bound to a GRID control. GRID controls also require columns to have a column name. 
The Map Converter provides an implementation of a Mapxml Transformer class to support the generation of GRID controls for multi-dimensional array items.
Mapxml Transformers are called after the map extract is loaded but before the map conversion according to the conversion rules is performed.
You can add a Mapxml Transformer class to your conversion rules file. The <code>convrulesMultidimensionalArrays.xml</code> is an example for this.  
<br></br>
To apply a Mapxml Transformer class to your conversion rules you must set the variable <code>$$mapxmltransformer$$</code> correspondingly:<br></br>
<code>
&lt;convvariable dynamic="false" varkind="sys"&gt;              
                &lt;varname&gt;$$mapxmltransformer$$&lt;/varname&gt;
                &lt;varvalue&gt;com.softwareag.natural.mapconverter.DEFAULTMapxmlTransformer&lt;/varvalue&gt;
        &lt;/convvariable&gt;</code><br></br>
The <code>DEFAULTMapxmlTransformer</code> class is the default implementation for converting multi-dimensional array items to GRID controls.
You can also write your own Mapxml Transformer:
<ol>
<li>The class must implement the interface <code>com.softwareag.natural.mapconverter.IMapxmlTransformer</code></li>
<li>Put the compiled .class file into the classpath of the cisnatural webapplication (cisnatural/WEB-INF/classes) or into the cisnatural/njxmapconverter/appclasses/classes directory</li>
</ol>
<h2>Related Documentation</h2>

<p>
The Map Converter Extension API uses SDO for data processing. Architecture and SDO is described in the SDO Specification:
<ul>
        <li><a href="http://www.osoa.org/download/attachments/36/Java-SDO-Spec-v2.1.0-FINAL.pdf?version=1">SDO Specification 2.1.0 Final</a></li>
</ul>

</div>

<!-- Put @see and @since tags down here. --></div>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li class="navBarCell1Rev">Overview</li>
<li>Package</li>
<li>Class</li>
<li>Use</li>
<li><a href="overview-tree.html">Tree</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev</li>
<li>Next</li>
</ul>
<ul class="navList">
<li><a href="index.html?overview-summary.html" target="_top">Frames</a></li>
<li><a href="overview-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
